<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inicio</title>

<!-- Google Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/05298bda59.js" crossorigin="anonymous"></script>

<!-- Animate.css -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<!-- Custom CSS -->
<link rel="stylesheet" href="CSS/estilo_inicio.css">

<!-- Javascript -->
<script src="JS/script.js"></script>
</head>

<body>
    <div class="contenedor">
        <header class="encabezado">
            <div>
                <img src="Imagenes/clin_codo_a_codo.png" alt="" class="logo">
                <h1 class="cartel">CLINICA CODO a CODO</h1>
            </div>
            <nav class="navegador">
                <a href="serv_medicos.html" style="color: white;">Servicios Médicos |</a>
                <a href="la_clinica.html" style="color: white;">La Clínica |</a>
                <a href="turnos.html" style="color: white;">Turnos |</a>
                <a href="contacto.html" style="color: white;">Contacto</a>
            </nav>

        </header>

        <div class="frase">
            <h2>Clínica <span>Codo a Codo</span></h2>
        </div>

        <div class="izquierda">
            <!-- Etiquetas y muestra datos de la API -->
            <div class="api">
                <h1><u>Clima en la Ciudad</u></h1>
                <i class="fa-solid fa-earth-americas"></i> <span id="timezone"></span> <br>
                <i class="fa-solid fa-calendar-days"></i> Fecha: <span id="current.time"></span> <br>
                <i class="fa-solid fa-temperature-three-quarters"></i></i> Temp actual: <span id="current.temperature_2m"></span>
                <span id="current_units.temperature_2m"></span> <br>
                <i class="fa-solid fa-wind"></i> Vel del viento: <span id="current.windspeed_10m"></span>
                <span id="current_units.windspeed_10m"></span> <br>
                <i class="fa-solid fa-compass"></i> Dir del viento: <span id="current.winddirection_10m"></span>
                <span id="current_units.winddirection_10m"></span> <br>
                <i class="fa-solid fa-water"></i> Humedad: <span id="current.relativehumidity_2m"></span>
                <span id="current_units.relativehumidity_2m"></span> <br>
            </div>
        </div>

        <div class="centro">
            <!-- Contenedor de imagrnes -->
            <div class="carousel-container">
                <img class="carousel-image" src="Imagenes/index01.jpg">
                <img class="carousel-image" src="Imagenes/index02.jpg">
                <img class="carousel-image" src="imagenes/index03.jpg">
                <img class="carousel-image" src="imagenes/index04.jpg">
                <img class="carousel-image" src="imagenes/index05.jpg">
            </div>
        </div>

        <!-- SCRIPT efecto cambiante de imagenes -->
        <script>
            // EFECTO CARROUSEL DE PAGINA DE INICIO
            // Arreglo de URLs de imágenes
            const images = ["imagenes/index01.jpg", "imagenes/index02.jpg", "imagenes/index03.jpg", "imagenes/index04.jpeg", "imagenes/index05.jpg"];

            const carouselImages = document.querySelectorAll(".carousel-image");
            let currentIndex = 0;

            function changeImage() {
                carouselImages[currentIndex].style.opacity = 0;
                currentIndex = (currentIndex + 1) % images.length;
                carouselImages[currentIndex].style.opacity = 1;
            }

            // Cambiar de imagen cada 3 segundos (3000 milisegundos)
            setInterval(changeImage, 3000);

            // Inicializar la primera imagen
            carouselImages[currentIndex].style.opacity = 1;

            //FIN DEL EFECTO
        </script>


        <!-- SCRIPT para la API -->
        <script>
            //Guardamos la url de la api que vamos a usar
            const url_api = 'https://api.open-meteo.com/v1/forecast?latitude=-34.6131&longitude=-58.3772&current=temperature_2m,relativehumidity_2m,is_day,windspeed_10m,winddirection_10m,windgusts_10m&hourly=temperature_2m&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max&timezone=auto'
            //Indicamos que la función va a ser asíncrona (lo usamos cuando trabajamos con apis externas)
            async function obtenerTemp() {
                //Fetch va a buscar los datos a la api y devuelve promesas
                //Con await decimos que espere porque puede tardar 
                const response = await fetch(url_api)
                console.log(response)   // Acá lo importante es que la promesa
                // me devuelve en [[PromiseResult]]: Response
                // que el status es 200, indica que trajo los datos
                // podría traer errores de 400 para arriba: no se encuentra la página
                // o 500 para arriba: errores de servidor

                //Debemos transformar esto en un objeto json para poder trabajarlo:
                const data = await response.json()
                console.log(data)

                //Ahora podemos mostrar los datos: 
                const lugar = data.timezone                                     //lugar de la muestra
                const fecha = data.current.time                                 //dato de la fecha
                const temperatura = data.current.temperature_2m                 //dato de la temp
                const unid_temp = data.current_units.temperature_2m             //UM de la temp
                const vel_viento = data.current.windspeed_10m                   //vel del viento
                const unid_viento = data.current_units.windspeed_10m            //UM vel del viento
                const dir_viento = data.current.winddirection_10m               //vel del viento
                const card_viento = data.current_units.winddirection_10m        //cardinal del viento
                const humedad = data.current.relativehumidity_2m                //Humedad
                const unid_humedad = data.current_units.relativehumidity_2m     //Unid de humedad

                //Levantamos los datos del JSON de la API
                document.getElementById("timezone").innerHTML = lugar
                document.getElementById("current.time").innerHTML = fecha
                document.getElementById("current.temperature_2m").innerHTML = temperatura
                document.getElementById("current_units.temperature_2m").innerHTML = unid_temp
                document.getElementById("current.windspeed_10m").innerHTML = vel_viento
                document.getElementById("current_units.windspeed_10m").innerHTML = unid_viento
                document.getElementById("current.winddirection_10m").innerHTML = dir_viento
                document.getElementById("current_units.winddirection_10m").innerHTML = card_viento
                document.getElementById("current.relativehumidity_2m").innerHTML = humedad
                document.getElementById("current_units.relativehumidity_2m").innerHTML = unid_humedad
            }
            //Llamamos a la funcion
            obtenerTemp()
        </script>


        <footer class="pie">
            <h3>
                <i class="fa-solid fa-location-dot"></i> Esperanza 114, Buenos Aires --
                <i class="fa-solid fa-envelope"></i> E-mail: clinica_cac@clinica.com.ar --
                <i class="fa-solid fa-phone"></i> 1154228123 --
                <i class="fa-brands fa-whatsapp"></i> 1162375444
            </h3>
        </footer>
    </div>
</body>

</html>